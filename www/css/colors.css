/****************************** light mode ******************************/

:root {
  --c-hero-bg: var(--bs-dark);
  --c-navbar-bg: var(--bs-dark);

  /* these are replaced by their complements in dark mode */
  --c-000: #000;
  --c-111: #111;
  --c-222: #222;
  --c-333: #333;
  --c-444: #444;
  --c-555: #555;
  --c-666: #666;
  --c-777: #777;
  --c-888: #888;
  --c-999: #999;
  --c-aaa: #aaa;
  --c-bbb: #bbb;
  --c-ccc: #ccc;
  --c-ddd: #ddd;
  --c-eee: #eee;
  --c-fff: #fff;

  /* verdict colors */
  --v-none: #eee;
  --v-undecidable: #aaa;
  --v-red: #d90404;
  --v-orange: #ec771f;
  --v-yellow: #ffeb3b;
  --v-olive: #9bad22;
  --v-green: #37700a;
}


/******************************* dark mode *******************************/

/**
 * General rules:
 *
 * 1. We only override components that we actually use. If something looks
 *    wrong, see what Bootstrap has and override it here.
 *
 * 2. We generaly replace gray shades with their complements. For predefined
 *    gray shades:
 *
 *    #000 with #fff
 *    #212529 / --bs-gray-900 with --bs-gray-100
 *    #343a40 / --bs-gray-800 with --bs-gray-200
 *    #495057 / --bs-gray-700 with --bs-gray-300 (except for --bs-body-color)
 *    #6c757d / --bs-gray-600 with --bs-gray-400
 *    #adb5bd / --bs-gray-500 with --bs-gray-500 (identical value, but helps with clarity)
 *    #ced4da / --bs-gray-400 with --bs-gray-600
 *    #dee2e6 / --bs-gray-300 with --bs-gray-700
 *    #e9ecef / --bs-gray-200 with --bs-gray-800
 *    #fff with --bs-gray-900
 *
 *    For other gray (and grayish) shades, subtract each component from 0xFF.
 *    For example, replace #1e2125 with #e1deda. Similarly, replace rgba(0, 0, 0, X)
 *    with rgba(255, 255, 255, X).
 *
 */
@media (prefers-color-scheme: dark) {
  :root {
    color-scheme: dark;

    --bs-body-bg: var(--bs-gray-900);
    --bs-body-color: white;
    --c-alert-secondary: var(--bs-gray-400);  /* replaces #6c757d aka gray-600 */
    --c-alert-secondary-bg: #1d1c1a;          /* replaces #e2e3e5 */
    --c-dropdown-item-hover: #e1deda;         /* replaces #1e2125 */
    --c-file-selector-hover: #221f1c;         /* replaces #dde0e3 */
    --c-input-focus-border: #237afc;          /* replaces #86b7fe */
    --c-primary-hover: #0a58ca;               /* does not change, but needs to be redefined */

    /* our colors */
    --c-hero-bg: #252a31;                     /* midpoint between navbar and body bg */
    --c-navbar-bg: #2a2f3a;                   /* slightly lighter than --bs-body-bg */

    /**
     * Complements are not defined relative to 0xFF. Instead, we split the
     * interval #212529-#ffffff into 16 shades.
     **/
    --c-000: #fff;
    --c-111: #f0f0f1;
    --c-222: #e1e2e3;
    --c-333: #d3d3d4;
    --c-444: #c4c5c6;
    --c-555: #b5b6b8;
    --c-666: #a6a8aa;
    --c-777: #97999b;
    --c-888: #898b8d;
    --c-999: #7a7c7e;
    --c-aaa: #6b6e70;
    --c-bbb: #5c5f62;
    --c-ccc: #4d5154;
    --c-ddd: #3f4245;
    --c-eee: #303437;
    --c-fff: #212529;
  }

  .alert-secondary {
    background-color: var(--c-alert-secondary-bg);
    color: var(--c-alert-secondary);
  }

  .border {
    border-color: var(--bs-gray-700) !important;
  }
  .border-bottom {
    border-bottom-color: var(--bs-gray-700) !important;
  }

  .breadcrumb-item + .breadcrumb-item::before {
    color: var(--bs-gray-400);
  }

  .btn {
    /* this overrides all other colors, so we will also need to redefine */
    /* things like .btn-outline-primary */
    color: var(--bs-gray-300);
  }
  .btn:hover {
    color: var(--bs-gray-300);
  }

  .btn-close {
    /* this is stupid */
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%23fff'%3e%3cpath d='M.293.293a1 1 0 011.414 0L8 6.586 14.293.293a1 1 0 111.414 1.414L9.414 8l6.293 6.293a1 1 0 01-1.414 1.414L8 9.414l-6.293 6.293a1 1 0 01-1.414-1.414L6.586 8 .293 1.707a1 1 0 010-1.414z'/%3e%3c/svg%3e");
  }

  .btn-link {
    color: var(--bs-primary);
  }
  .btn-link:hover {
    color: var(--c-primary-hover);
  }

  .btn-outline-danger {
    color: var(--bs-danger);
  }
  .btn-outline-danger:hover {
    color: var(--bs-body-bg);
  }
  .btn-outline-danger:disabled, .btn-outline-danger.disabled {
    color: var(--bs-danger);
  }

  .btn-outline-primary {
    color: var(--bs-primary);
  }
  .btn-outline-primary:hover {
    color: var(--bs-body-bg);
  }

  .btn-outline-secondary {
    border-color: var(--bs-gray-400);
    color: var(--bs-gray-400);
  }
  .btn-outline-secondary:hover {
    background-color: var(--bs-gray-400);
    border-color: var(--bs-gray-400);
    color: var(--bs-gray-900);
  }

  .btn-outline-warning {
    color: var(--bs-warning);
  }
  .btn-outline-warning:hover {
    color: var(--bs-body-bg);
  }

  .btn-warning,
  .btn-warning:hover {
    color: var(--bs-body-bg);
  }

  .card {
    background-color: var(--bs-gray-900);
    border-color: rgba(255, 255, 255, 0.125);
  }
  .card-footer {
    background-color: rgba(255, 255, 255, 0.03);
    border-top-color: rgba(255, 255, 255, 0.125);
  }
  .card-header {
    background-color: rgba(255, 255, 255, 0.03);
    border-bottom-color: rgba(255, 255, 255, 0.125);
  }

  .dropdown-divider {
    border-top-color: rgba(255, 255, 255, 0.15);
  }

  .dropdown-item {
    color: var(--bs-gray-100);
  }
  .dropdown-item:hover, .dropdown-item:focus {
    color: var(--c-dropdown-item-hover);
    background-color: var(--bs-gray-800);
  }
  .dropdown-item.disabled, .dropdown-item:disabled {
    color: var(--bs-gray-500);
  }

  .dropdown-menu {
    background-color: var(--bs-gray-900);
    border-color: rgba(255, 255, 255, 0.15);
    color: var(--bs-gray-300);
  }

  .form-check-input {
    background-color: var(--bs-gray-900);
    border-color: rgba(255, 255, 255, 0.25);
  }
  .form-check-input:focus {
    border-color: var(--c-input-focus-border);
  }

  .form-control {
    background-color: var(--bs-gray-900);
    border-color: var(--bs-gray-600);
    color: var(--bs-gray-300);
  }
  .form-control:disabled, .form-control[readonly] {
    background-color: var(--bs-gray-800);
  }
  .form-control::file-selector-button {
    background-color: var(--bs-gray-800);
    color: var(--bs-gray-300);
  }
  .form-control:hover:not(:disabled):not([readonly])::file-selector-button {
    background-color: var(--c-file-selector-hover);
  }
  .form-control:focus {
    background-color: var(--bs-gray-900);
    border-color: var(--c-input-focus-border);
    color: var(--bs-gray-300);
  }
  .form-control::placeholder {
    color: --bs-gray-400;
  }

  .form-select {
    background-color: var(--bs-gray-900);
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23e9ecef' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-6'/%3e%3c/svg%3e");
    border-color: var(--bs-gray-600);
    color: var(--bs-gray-300);
  }
  .form-select:disabled {
    background-color: var(--bs-gray-800);
  }
  .form-select:focus {
    border-color: var(--c-input-focus-border);
  }

  .form-text {
    color: var(--bs-gray-400);
  }

  .input-group-text {
    background-color: var(--bs-gray-800);
    border-color: var(--bs-gray-600);
    color: var(--bs-gray-300);
  }

  .modal-backdrop {
    background-color: #fff;
  }

  .modal-content {
    background-color: var(--bs-gray-900);
    border-color: rgba(255, 255, 255, 0.2);
  }

  .modal-footer {
    border-top-color: var(--bs-gray-700);
  }

  .modal-header {
    border-bottom-color: var(--bs-gray-700);
  }

  .page-item.active .page-link {
    background-color: var(--bs-gray-400);
    border-color: var(--bs-gray-400);
    color: var(--bs-gray-900);
  }
  .page-item.disabled .page-link {
    background-color: var(--bs-gray-900);
    border-color: var(--bs-gray-700);
    color: var(--bs-gray-400);
 }

  .page-link {
    background-color: var(--bs-gray-900);
    border-color: var(--bs-gray-700);
  }
  .page-link:hover {
    background-color: var(--bs-gray-800);
    border-color: var(--bs-gray-700);
  }
  .page-link:focus {
    background-color: var(--bs-gray-800);
  }

  .popover {
    border-color: rgba(255, 255, 255, 0.2);
  }
  .bs-popover-bottom > .popover-arrow::before,
  .bs-popover-auto[data-popper-placement^="bottom"] > .popover-arrow::before {
    border-bottom-color: rgba(255, 255, 255, 0.25);
  }
  .bs-popover-end > .popover-arrow::before,
  .bs-popover-auto[data-popper-placement^="right"] > .popover-arrow::before {
    border-right-color: rgba(255, 255, 255, 0.25);
  }
  .bs-popover-start > .popover-arrow::before,
  .bs-popover-auto[data-popper-placement^="left"] > .popover-arrow::before {
    border-left-color: rgba(255, 255, 255, 0.25);
  }
  .bs-popover-top > .popover-arrow::before,
  .bs-popover-auto[data-popper-placement^="top"] > .popover-arrow::before {
    border-top-color: rgba(255, 255, 255, 0.25);
  }

  .table {
    --bs-table-hover-bg: rgba(255, 255, 255, 0.075);
    --bs-table-hover-color: var(--bs-gray-300);
    border-color: var(--bs-gray-700);
    color: var(--bs-gray-300);
  }

  .toast {
    background-color: var(--bs-gray-400);
    box-shadow: 0 0.5rem 1rem rgba(255, 255, 255, 0.2);
    color: var(--bs-gray-800);
  }

  .text-muted {
    color: var(--bs-gray-400) !important;
  }

  /* select2 colors */
  .select2-container--bootstrap-5 .select2-selection {
    background-color: var(--bs-gray-900);
    border-color: var(--bs-gray-600);
    color: var(--bs-gray-300);
  }

  .select2-container--bootstrap-5 .select2-selection--single {
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23e9ecef' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-6'/%3e%3c/svg%3e");
  }

  .select2-container--bootstrap-5 .select2-selection--single .select2-selection__rendered {
    color: var(--bs-gray-100);
  }

  .select2-container--bootstrap-5.select2-container--focus .select2-selection,
  .select2-container--bootstrap-5.select2-container--open .select2-selection {
    border-color: var(--c-input-focus-border);
  }

  .select2-container--bootstrap-5 .select2-dropdown {
    border-color: var(--bs-gray-600);
  }

  .select2-dropdown {
    background-color: var(--bs-gray-900);
    border: 1px solid #555;
  }

  .select2-container--bootstrap-5 .select2-dropdown .select2-search .select2-search__field {
    background-color: black; /* breaking our rule -- looks clearer than var(--bs-gray-900) */
    border-color: var(--bs-gray-600);
    color: var(--bs-gray-100);
  }

  .select2-container--bootstrap-5 .select2-selection--multiple .select2-selection__rendered .select2-selection__choice {
    border-color: var(--bs-gray-600);
    color: var(--bs-gray-100);
  }

  .select2-container--bootstrap-5 .select2-selection--multiple .select2-search .select2-search__field {
    color: white;
  }

}
